<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js"></script>		
		<style>
			body, html {
			height: 99%;
			width: 99%;
			margin: auto;
			}
			
			#map_canvas {
			width: 100%; height: 100%;
			}
		</style>
		<script type="text/javascript">
			
			$(window).load(function(){
				
				$(document).ready(function () {
					var map;
					var elevator;
					var myOptions = {
						//zoom: 10,
						//center: new google.maps.LatLng(-33.92, 151.25),
						//mapTypeId: google.maps.MapTypeId.ROADMAP						
					};
					map = new google.maps.Map($('#map_canvas')[0], myOptions);
					
					var bounds = new google.maps.LatLngBounds();
					var addresses = [#ADDRLIST];
					
					
					for (var x = 0; x < addresses.length; x++) {
						
						$.getJSON(encodeURI('http://maps.googleapis.com/maps/api/geocode/json?region=GR&language=#lang&address='+addresses[x]), null, function (data) {
							var p = data.results[0].geometry.location
							var latlng = new google.maps.LatLng(p.lat, p.lng);
							new google.maps.Marker({
								position: latlng,
								map: map
							});
							
							bounds.extend(latlng);							 
							map.fitBounds(bounds);
							
						});
					}
					
					
					// Apply fitBounds
					map.fitBounds(bounds);  
					
					// Draw the bounds rectangle on the map
					var ne = bounds.getNorthEast();
					var sw = bounds.getSouthWest();
					
					var boundingBox = new google.maps.Polyline({
						path: [
						ne, new google.maps.LatLng(ne.lat(), sw.lng()),
						sw, new google.maps.LatLng(sw.lat(), ne.lng()), ne
						],
						strokeColor: '#FF0000',
						strokeOpacity: 1.0,
						strokeWeight: 2
					});
					
					boundingBox.setMap(map);			
					
				});
				
			});
			
		</script>
		
	</head>
	<body>
		
		<div id="map_canvas"></div>
		
	</body>
</html>
